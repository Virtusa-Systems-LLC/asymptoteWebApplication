-----------------------------------------------------------------
-----------------------------------------------------------------
|                          INSTALLATION                         |
-----------------------------------------------------------------
-----------------------------------------------------------------

Pre-Application Install
=======================

Install Node.js (www.nodejs.org)


Asymptote Web Application Installation
======================================

1. We recommend running this application as a non-privileged user
"asymptote" on a virtual machine. The application gives clients the same
read (but not write) access to the filesystem that the user asymptote has.

2. Disable logins:

passwd -d asymptote

3. Install the latest version of Asymptote on the system.

4. Create a file ~asymptote/.asy/config.asy containing the lines:

import settings;
settings.dir="/usr/local/share/doc/asymptote/examples";

5. Starting as a user belonging to the asymptote group, install the node
modules and application dependencies:

cd ~asymptote
git clone https://github.com/vectorgraphics/asymptote-server
cd asymptote-server
su
su asymptote
make
exit
exit

6. We recommend running the shell script

pruneAsyClients 1800

as a cronjob at regular intervals to clean up disconnected sessions;
the argument specifies the number of seconds after the last ping at which
the client is considered disconnected and its workspace is deleted.
By default, pings are sent from active clients to the server every 600 seconds.

-----------------------------------------------------------------
-----------------------------------------------------------------
|                      RUNNING APPLICATION                      |
-----------------------------------------------------------------
-----------------------------------------------------------------

There are two modes for running this application:

1. Running the full application
   ============================

cd ~asymptote/asymptote-server
sudo make run

    Root priviledges are dropped once the application is listening
    on port 80. The application can then be accessed on

http://localhost:80

2. Running only the front-end part of the application
   ==================================================
   This mode is mainly used for development of the GUI to test
   the CSS and Javascript code. No communication can be made to
   the server in this mode. The launch the application in this
   mode on a localhost service:

cd ~asymptote/asymptote-server
make frontend

